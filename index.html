<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Shell Tutorial Assignments</title>
<style>
  /* Reset */
  * {
    box-sizing: border-box;
  }
  body {
    margin: 0; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background: #f9f9f9; color: #333;
  }
  header {
    background: #002855;
    color: white;
    padding: 1rem 2rem;
    font-size: 1.8rem;
    font-weight: 700;
    text-align: center;
    letter-spacing: 1px;
  }
  #container {
    display: flex;
    min-height: 90vh;
  }
  nav {
    width: 250px;
    background: #034078;
    color: white;
    padding: 1rem;
    position: sticky;
    top: 0;
    height: calc(100vh - 72px);
    overflow-y: auto;
  }
  nav h2 {
    font-size: 1.2rem;
    margin-top: 0;
    border-bottom: 1px solid #1170aa;
    padding-bottom: 0.5rem;
  }
  nav ul {
    list-style: none;
    padding-left: 0;
  }
  nav ul li {
    margin: 0.7rem 0;
  }
  nav ul li a {
    color: #b3d4fc;
    text-decoration: none;
    font-weight: 600;
    transition: color 0.3s;
  }
  nav ul li a:hover,
  nav ul li a.active {
    color: #ffe156;
  }
  main {
    flex: 1;
    padding: 2rem 3rem;
    background: white;
    box-shadow: 0 0 10px #ddd;
    max-width: 900px;
    margin: 1rem auto;
  }
  h1, h2, h3 {
    color: #002855;
  }
  pre {
    background: #f4f4f4;
    border-left: 4px solid #034078;
    padding: 1rem;
    overflow-x: auto;
  }
  code {
    font-family: 'Source Code Pro', monospace;
    background: #eaeaea;
    padding: 0.2rem 0.4rem;
    border-radius: 3px;
  }
  section {
    margin-bottom: 3rem;
  }
  footer {
    text-align: center;
    padding: 1rem;
    font-size: 0.9rem;
    color: #666;
  }
  /* Responsive */
  @media (max-width: 768px) {
    #container {
      flex-direction: column;
    }
    nav {
      width: 100%;
      height: auto;
      position: relative;
    }
    main {
      max-width: 100%;
      margin: 0;
      box-shadow: none;
      padding: 1rem;
    }
  }
</style>
</head>
<body>

<header>Shell Tutorial Assignments</header>

<div id="container">
  <nav>
    <h2>Contents</h2>
    <ul>
      <li><a href="#introduction" class="active">Introduction</a></li>
      <li><a href="#setup">Setup</a></li>
      <li><a href="#assignments">Assignments</a></li>
      <li><a href="#solutions">Solutions</a></li>
      <li><a href="#resources">Resources</a></li>
      <li><a href="#contact">Contact</a></li>
    </ul>
  </nav>

  <main>
    <section id="introduction">
      <h1>Welcome to the Shell Tutorial Assignments</h1>
      <p>This tutorial repository is designed for students interested in learning Bash shell scripting through real-world examples inspired by astrophysical particle physics and string theory data.</p>
      <p>You will gain practical experience in navigating the filesystem, manipulating text, scripting logic, and processing scientific datasets.</p>
    </section>

    <section id="setup">
      <h2>Setup Instructions</h2>
      <p>Before starting the assignments, please prepare your environment:</p>
      <pre><code>chmod +x setup.sh
./setup.sh
</code></pre>
      <p>This script will check your environment and make solution scripts executable.</p>
    </section>

    <section id="assignments">
      <h2>Problems</h2>
      <p>Problems are located in the <code>problems/</code> folder. Each problem is designed to challenge a specific Bash concept, such as loops, conditionals, or text processing tools.</p>
      <ul>
        <li><strong>Problem 1:</strong> Exploring cosmic ray datasets</li>
        <li><strong>Problem 2:</strong> Filtering dark matter simulation logs</li>
        <li><strong>Problem 3:</strong> Parsing string theory event files</li>
      </ul>
      <p>Clone the repository and try to solve each problem using Bash commands and scripts.</p>
    </section>

   <section id="assignment1" style="margin-bottom: 4em;">
  <h2>üî≠ Assignment 1: Exploring Cosmic Ray Flux Data</h2>
  <p>Welcome to your first assignment! We'll apply the basic shell skills you've learned to explore a dataset inspired by astrophysical particle physics. The data contains simulated measurements of cosmic ray particle fluxes detected by an instrument in space.</p>

  <h3>üìò Topics Covered</h3>
  <ul>
    <li>Navigating Files and Directories</li>
    <li>Working with Files and Directories</li>
  </ul>

  <h3>üìÅ Dataset</h3>
  <p>The file is located at: <code>data/cosmic_flux_data.txt</code></p>
  <pre><code>Energy(GeV)	Flux(particles/m¬≤/s/sr/GeV)	Particle
12.5	4.2e-3	Proton
55.3	1.1e-3	Electron
29.9	3.7e-3	Proton
9.8	5.5e-3	Muon
...</code></pre>

  <p><strong>Each row</strong> corresponds to a cosmic ray detection event. Your job is to navigate the file system and extract meaningful scientific information using shell commands.</p>

  <h3>üß† Problem Statement</h3>
  <ol>
    <li><strong>Navigate</strong> to the <code>data/</code> directory using <code>cd</code>.</li>
    <li>Use <code>ls</code> to verify that the file <code>cosmic_flux_data.txt</code> exists.</li>
    <li>Use <code>cat</code> or <code>less</code> to inspect the file content. How many columns are there? What are their headers?</li>
    <li>Return to the parent directory and create a new folder called <code>results/</code>.</li>
    <li>Copy the dataset into the <code>results/</code> folder using <code>cp</code>.</li>
    <li>Move into the <code>results/</code> folder and rename the file to <code>cosmic_flux_backup.txt</code>.</li>
    <li>Count how many lines (including the header) are in the file using <code>wc</code>.</li>
    <li>Now return to the repo root using <code>cd ../..</code> and continue with the next problem once finished.</li>
  </ol>

  <h3>üìå Notes</h3>
  <ul>
    <li>Use <code>pwd</code> to check where you are at any moment.</li>
    <li>Use <code>mkdir</code>, <code>cp</code>, and <code>mv</code> with care ‚Äî these commands change your file system!</li>
    <li>Remember: you can always use <code>man &lt;command&gt;</code> to learn more.</li>
  </ul>

  <h3>‚úÖ Deliverable</h3>
  <p>Create a Bash script called <code>assignment1_solution.sh</code> that performs all the steps above, using relative paths.</p>
</section>

<section id="assignment2" style="margin-bottom: 4em;">
  <h2>üî≠ Assignment 2: Processing Cosmic Ray Data with Pipes, Filters, and Loops</h2>
  <p>Building on your first assignment, now you will analyze the cosmic ray flux data more deeply using pipes, filters, and loops in Bash.</p>

  <h3>üìò Topics Covered</h3>
  <ul>
    <li>Pipes and Filters (<code>|</code>, <code>grep</code>, <code>awk</code>, <code>cut</code>, <code>sort</code>, <code>uniq</code>)</li>
    <li>Loops (<code>for</code>, <code>while</code>)</li>
    <li>Basic File Navigation and Manipulation</li>
  </ul>

  <h3>üìÅ Dataset</h3>
  <p>Recall the file <code>results/cosmic_flux_backup.txt</code> from Assignment 1. This file contains the cosmic ray flux measurements.</p>

  <h3>üß† Problem Statement</h3>
  <ol>
    <li>Navigate to the <code>results/</code> directory.</li>
    <li>Using pipes and filters, find out how many unique particle types are present in the dataset.</li>
    <li>Extract and display the top 5 events with the highest energy values.</li>
    <li>Use a <code>for</code> or <code>while</code> loop to calculate and print the average flux for each particle type found in the dataset.</li>
    <li>Create a new file called <code>high_energy_protons.txt</code> that contains only rows for protons with energy greater than 20 GeV.</li>
  </ol>

  <h3>üìå Notes</h3>
  <ul>
    <li>Remember the dataset has a header row ‚Äî skip it when processing numeric data.</li>
    <li>Use commands like <code>grep</code>, <code>awk</code>, <code>sort</code>, <code>uniq</code>, <code>cut</code>, and <code>head</code>.</li>
    <li>Loops are useful to automate repeated tasks for each particle type.</li>
    <li>Print meaningful messages for clarity when running your script.</li>
  </ul>

  <h3>‚úÖ Deliverable</h3>
  <p>Create a Bash script called <code>assignment2_solution.sh</code> that performs all the steps and saves the output files inside the <code>results/</code> directory.</p>
</section>


<section id="assignment3" style="margin-bottom: 4em;">
  <h2>üî≠ Assignment 3: Analyze Astrophysics Simulation Logs with Shell Scripts</h2>
  <p>You have a folder <code>simulation_logs/</code> containing many <code>.log</code> files from astrophysics simulations. Each file may have lines with <code>ERROR</code> or <code>WARNING</code>.</p>

  <h3>üß© Tasks</h3>
  <ol>
    <li>Use <code>find</code> to locate all <code>.log</code> files inside <code>simulation_logs/</code>.</li>
    <li>Count and print the total number of log files found.</li>
    <li>For each file that contains <code>ERROR</code>, print the filename and the number of error lines.</li>
    <li>Count how many files contain <code>ERROR</code> and how many contain <code>WARNING</code>.</li>
    <li>Extract all <code>ERROR</code> lines from all files into <code>all_errors.txt</code>.</li>
    <li><em>(Optional)</em> Print the top 5 most common error messages from <code>all_errors.txt</code>.</li>
  </ol>

  <h3>üìå Notes</h3>
  <ul>
    <li>Write a shell script <code>analyze_logs.sh</code> to do the above.</li>
    <li>Include clear messages describing each step.</li>
    <li>Use loops, <code>grep</code>, <code>find</code>, <code>wc</code>, <code>sort</code>, and <code>uniq</code>.</li>
  </ul>

  <h3>‚úÖ Deliverable</h3>
  <p>Submit the executable shell script <code>analyze_logs.sh</code> that performs all tasks.</p>
</section>




<section id="solution1" style="margin-bottom: 4em;">
  <h2>üõ† Solution to Assignment 1: Exploring Cosmic Ray Flux Data</h2>
  <p>Below is a step-by-step Bash script explanation that performs the tasks requested.</p>

  <pre><code class="bash">
#!/bin/bash

# Step 1: Navigate to the data directory
echo "Navigating to data/ directory..."
cd data || { echo "data/ directory not found!"; exit 1; }

# Step 2: List files to confirm dataset exists
echo "Listing files in data/:"
ls

# Step 3: Inspect the file content (show first 5 lines)
echo "Displaying first 5 lines of cosmic_flux_data.txt:"
head -n 5 cosmic_flux_data.txt

# Step 4: Go back to parent directory
echo "Returning to parent directory..."
cd ..

# Step 5: Create results/ directory if it does not exist
echo "Creating results/ directory..."
mkdir -p results

# Step 6: Copy dataset to results/
echo "Copying dataset to results/ folder..."
cp data/cosmic_flux_data.txt results/

# Step 7: Move into results/ and rename the file
cd results || { echo "results/ directory not found!"; exit 1; }
echo "Renaming cosmic_flux_data.txt to cosmic_flux_backup.txt..."
mv cosmic_flux_data.txt cosmic_flux_backup.txt

# Step 8: Count the lines including header
echo "Counting lines in cosmic_flux_backup.txt:"
wc -l cosmic_flux_backup.txt

# Step 9: Return to repo root (assuming started from repo root)
echo "Returning to repo root directory..."
cd ../..

echo "Assignment 1 tasks complete."
  </code></pre>

  <h3>Explanation:</h3>
  <ul>
    <li><code>cd data</code>: changes directory to <code>data/</code> folder containing the dataset.</li>
    <li><code>ls</code>: lists files to confirm the dataset file is present.</li>
    <li><code>head -n 5</code>: shows the first 5 lines so we can inspect headers and sample data.</li>
    <li><code>mkdir -p results</code>: creates a new folder <code>results/</code>, <code>-p</code> avoids errors if it exists.</li>
    <li><code>cp</code>: copies the file to the new directory.</li>
    <li><code>mv</code>: renames the copied file inside <code>results/</code>.</li>
    <li><code>wc -l</code>: counts lines to verify file content length.</li>
    <li><code>cd ../..</code>: moves back to the repository root.</li>
  </ul>

  <p>This script uses relative paths to ensure portability and is designed for easy understanding and modification.</p>
</section>

<section id="solution2" style="margin-bottom: 4em;">
  <h2>üõ† Solution to Assignment 2: Processing Cosmic Ray Data with Pipes, Filters, and Loops</h2>
  <p>This script performs all the tasks requested using pipes, filters, loops, and basic shell scripting.</p>

  <pre><code class="bash">
#!/bin/bash

# Navigate to results directory
echo "Step 1: Navigate to results/ directory..."
cd results || { echo "results/ directory not found!"; exit 1; }

# Step 2: Find number of unique particle types
echo "Step 2: Counting unique particle types..."
unique_particles=$(tail -n +2 cosmic_flux_backup.txt | cut -f3 | sort | uniq | wc -l)
echo "There are $unique_particles unique particle types."

# Step 3: Extract top 5 highest-energy events
echo "Step 3: Top 5 highest-energy events:"
echo "(Energy(GeV), Flux, Particle)"
tail -n +2 cosmic_flux_backup.txt | sort -k1,1nr | head -n 5

# Step 4: Calculate average flux for each particle type using a loop
echo "Step 4: Calculating average flux per particle type..."
particles=$(tail -n +2 cosmic_flux_backup.txt | cut -f3 | sort | uniq)

for particle in $particles; do
  avg_flux=$(awk -v p="$particle" 'BEGIN{sum=0;count=0} $3==p {sum+=$2; count++} END{if(count>0) print sum/count; else print 0}' cosmic_flux_backup.txt)
  echo "Average flux for $particle: $avg_flux"
done

# Step 5: Create file with high-energy protons (>20 GeV)
echo "Step 5: Creating high_energy_protons.txt for protons with Energy > 20 GeV..."
# Copy header first
head -n 1 cosmic_flux_backup.txt > high_energy_protons.txt
# Filter and append matching lines
awk 'NR>1 && $3=="Proton" && $1>20 {print}' cosmic_flux_backup.txt >> high_energy_protons.txt

echo "All tasks complete. File high_energy_protons.txt created in results/."

# Return to repo root
cd ../..
  </code></pre>

  <h3>Explanation:</h3>
  <ul>
    <li><code>tail -n +2</code>: skips header row for accurate data processing.</li>
    <li><code>cut -f3</code>: extracts the third column (Particle type).</li>
    <li><code>sort | uniq | wc -l</code>: counts unique particle types.</li>
    <li><code>sort -k1,1nr</code>: sorts descending by the first column (Energy).</li>
    <li><code>head -n 5</code>: picks the top 5 after sorting.</li>
    <li>The <code>for</code> loop iterates over each particle type to calculate average flux using <code>awk</code>.</li>
    <li><code>awk</code> filters protons with energy greater than 20 GeV to create a new file with header preserved.</li>
  </ul>

  <p>This script uses relative paths and includes safety checks to ensure directories exist.</p>
</section>

<section id="solution3" style="margin-bottom: 4em;">
  <h2>‚úÖ Solution for Assignment 3: Analyze Astrophysics Simulation Logs</h2>

  <p>Below is a well-commented shell script <code>analyze_logs.sh</code> that accomplishes all tasks from the assignment:</p>

  <pre><code class="bash">#!/bin/bash

echo "Starting log analysis..."

# Step 1: Find all .log files
log_files=$(find simulation_logs/ -type f -name "*.log")

if [[ -z "$log_files" ]]; then
  echo "No log files found in simulation_logs/."
  exit 1
fi

# Step 2: Count total log files found
num_files=$(echo "$log_files" | wc -l)
echo "Total log files found: $num_files"

error_files=0
warning_files=0

# Step 3 & 4: Loop over files to find errors and warnings
for file in $log_files; do
  error_count=$(grep -c "ERROR" "$file")
  warning_count=$(grep -c "WARNING" "$file")

  if [[ $error_count -gt 0 ]]; then
    echo "File '$file' contains $error_count ERROR lines."
    ((error_files++))
  fi
  if [[ $warning_count -gt 0 ]]; then
    ((warning_files++))
  fi
done

echo "Number of files with ERROR: $error_files"
echo "Number of files with WARNING: $warning_files"

# Step 5: Extract all ERROR lines into all_errors.txt
echo "Extracting all ERROR lines into all_errors.txt..."
> all_errors.txt  # Empty the file first

for file in $log_files; do
  grep "ERROR" "$file" >> all_errors.txt
done

# Step 6 (Optional): Show top 5 most common error messages
if [[ -s all_errors.txt ]]; then
  echo "Top 5 most common error messages:"
  cut -d':' -f2- all_errors.txt | sort | uniq -c | sort -nr | head -n 5
else
  echo "No ERROR lines found, skipping top error messages."
fi

echo "Log analysis completed."
</code></pre>

  <h3>How to use:</h3>
  <ul>
    <li>Save this script as <code>analyze_logs.sh</code> inside your repository.</li>
    <li>Make it executable with <code>chmod +x analyze_logs.sh</code>.</li>
    <li>Run it from the command line with <code>./analyze_logs.sh</code>.</li>
    <li>Make sure the <code>simulation_logs/</code> directory is at the same level or adjust the script paths.</li>
  </ul>

  <p>This script provides informative messages, counts files, extracts errors, and summarizes warnings as requested.</p>
</section>


    <section id="solutions">
      <h2>Solutions</h2>
      <p>Example solution scripts are in the <code>solutions/</code> folder. Use them as a reference after attempting each assignment on your own.</p>
      <p>To run a solution script, use:</p>
      <pre><code>./solutions/assignment1_solution.sh
</code></pre>
    </section>

    <section id="resources">
      <h2>Additional Resources</h2>
      <ul>
        <li><a href="https://swcarpentry.github.io/shell-novice/" target="_blank" rel="noopener">Software Carpentry Shell Novice Tutorial</a></li>
        <li><a href="https://github.com/iliomar/shell-tutorial-assignments" target="_blank" rel="noopener">GitHub Repository</a></li>
        <li><a href="https://www.gnu.org/software/bash/manual/bash.html" target="_blank" rel="noopener">Bash Reference Manual</a></li>
        <li><a href="https://appletree.or.kr/quick_reference_cards/Unix-Linux/Linux%20Command%20Line%20Cheat%20Sheet.pdf" target="_blank" rel="noopener">Cheat Sheet</a></li>
        <li><a href="https://github.com/LeCoupa/awesome-cheatsheets/blob/master/languages/bash.sh" target="_blank" rel="noopener"></a>Cheat Sheet</li>
      </ul>
    </section>

    <section id="contact">
      <h2>Contact</h2>
      <p>If you have any questions or want to contribute, please reach out to Iliomar Rodriguez Ramos.</p>
      <p>Email: <a href="mailto:iliomar.rodriguez@upr.edu">iliomar.rodriguez@upr.edu</a></p>
    </section>
  </main>
</div>

<script>
  // Highlight the active menu item based on scroll position
  const sections = document.querySelectorAll('main section');
  const navLinks = document.querySelectorAll('nav ul li a');

  window.addEventListener('scroll', () => {
    let current = '';
    sections.forEach(section => {
      const sectionTop = section.offsetTop - 100;
      if (pageYOffset >= sectionTop) {
        current = section.getAttribute('id');
      }
    });
    navLinks.forEach(link => {
      link.classList.remove('active');
      if (link.getAttribute('href') === '#' + current) {
        link.classList.add('active');
      }
    });
  });
</script>

</body>
</html>
