<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Shell Tutorial Assignment</title>
<style>
  /* Reset */
  * {
    box-sizing: border-box;
  }
  body {
    margin: 0; 
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background: linear-gradient(135deg, #e0f0ff 0%, #f9f9f9 100%);
    color: #333;
  }
  header {
    background: #003366;
    color: white;
    padding: 1rem 2rem;
    font-size: 2rem;
    font-weight: 700;
    text-align: center;
    letter-spacing: 1.5px;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 1rem;
    box-shadow: 0 4px 8px rgba(0,0,0,0.1);
  }
  header img {
    height: 40px;
    width: auto;
    border-radius: 6px;
    filter: drop-shadow(0 0 2px rgba(0,0,0,0.3));
  }
  #container {
    display: flex;
    min-height: 90vh;
    max-width: 1200px;
    margin: 2rem auto;
    background: white;
    border-radius: 10px;
    box-shadow: 0 8px 20px rgba(0, 0, 0, 0.12);
    overflow: hidden;
  }
  nav {
    width: 280px;
    background: #00509e;
    color: white;
    padding: 2rem 1.5rem;
    position: sticky;
    top: 1rem;
    height: calc(100vh - 3rem);
    overflow-y: auto;
    border-radius: 10px 0 0 10px;
    box-shadow: inset -4px 0 6px -4px rgba(0,0,0,0.3);
  }
  nav h2 {
    font-size: 1.5rem;
    margin-top: 0;
    border-bottom: 2px solid #0099ff;
    padding-bottom: 0.75rem;
  }
  nav ul {
    list-style: none;
    padding-left: 0;
    margin-top: 1.5rem;
  }
  nav ul li {
    margin: 1rem 0;
  }
  nav ul li a {
    color: #cce6ff;
    text-decoration: none;
    font-weight: 600;
    display: flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.4rem 0.6rem;
    border-radius: 6px;
    transition: background-color 0.3s, color 0.3s;
  }
  nav ul li a:hover,
  nav ul li a.active {
    background-color: #007acc;
    color: #fff;
    box-shadow: 0 2px 10px rgba(0, 122, 204, 0.6);
  }
  nav ul li a svg {
    fill: #b3d4fc;
    transition: fill 0.3s;
  }
  nav ul li a:hover svg,
  nav ul li a.active svg {
    fill: #fff;
  }
  main {
    flex: 1;
    padding: 2.5rem 3rem;
    background: #fafafa;
    max-width: 900px;
    margin: 1rem auto;
    border-radius: 0 10px 10px 0;
    box-shadow: 0 0 12px rgba(0,0,0,0.06);
  }
  h1, h2, h3 {
    color: #003366;
    font-weight: 700;
  }
  pre {
    background: #eaeff5;
    border-left: 5px solid #00509e;
    padding: 1.2rem;
    overflow-x: auto;
    border-radius: 8px;
    font-size: 0.95rem;
  }
  code {
    font-family: 'Source Code Pro', monospace;
    background: #dde8f7;
    padding: 0.3rem 0.5rem;
    border-radius: 4px;
  }
  section {
    margin-bottom: 3.5rem;
    line-height: 1.6;
  }
  footer {
    text-align: center;
    padding: 1rem;
    font-size: 0.9rem;
    color: #777;
    margin-top: 3rem;
  }
  /* Scrollbar for nav */
  nav::-webkit-scrollbar {
    width: 8px;
  }
  nav::-webkit-scrollbar-track {
    background: #034578;
  }
  nav::-webkit-scrollbar-thumb {
    background-color: #0288d1;
    border-radius: 20px;
  }

  /* Responsive */
  @media (max-width: 768px) {
    #container {
      flex-direction: column;
      margin: 1rem;
      border-radius: 10px;
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.12);
      overflow: visible;
    }
    nav {
      width: 100%;
      height: auto;
      position: relative;
      border-radius: 10px 10px 0 0;
      padding: 1rem 1rem;
      box-shadow: none;
      max-height: 200px;
      overflow-y: auto;
    }
    main {
      max-width: 100%;
      margin: 0;
      box-shadow: none;
      border-radius: 0 0 10px 10px;
      padding: 1.5rem 1.5rem;
    }
  }

</style>

</head>
<body>

<header>Shell Tutorial Assignment</header>

<div id="container">
  <nav>
    <h2>Content</h2>
    <ul>
      <li><a href="#introduction" class="active">Introduction</a></li>
      <li><a href="#setup">Setup</a></li>
      <li><a href="#assignments">Problems</a></li>
      <li><a href="#solution1">Solutions</a></li>
      <li><a href="#resources">Resources</a></li>
      <li><a href="#contact">Contact</a></li>
    </ul>
  </nav>

  <main>
    <section id="intro" style="margin-bottom: 3em;">
  <h1>Shell Tutorial: Assignment</h1>
  <p> 
    This page contains a set of practical assignments that simulate some real-world tasks you might encounter in different fields </strong>.
  </p>

  <p>
    These assignments are meant to reinforce core Bash skills taught in the <a href="https://swcarpentry.github.io/shell-novice/" target="_blank">Software Carpentry Shell Novice</a> lesson.
    Each problem aligns with key concepts from the tutorial and is focused on scientific data processing using Unix tools.
  </p>

  <h2>What You'll Practice</h2>
  <ul>
    <li><strong>Problem 1:</strong> Navigating and managing astrophysical datasets using basic commands like <code>ls</code>, <code>cd</code>, <code>mkdir</code>, and <code>cp</code>.</li>
    <li><strong>Problem 2:</strong> Filtering and transforming cosmic ray data using pipes, loops, <code>grep</code>, <code>awk</code>, and <code>cut</code>.</li>
    <li><strong>Problem 3:</strong> Writing reusable shell scripts to analyze log files and extract important error diagnostics using <code>find</code>, <code>wc</code>, and scripting logic.</li>
  </ul>

  <p>
    All code, input data, and solution scripts can be found in the GitHub repository:
    <a href="https://github.com/iliomar/shell-tutorial-assignment" target="_blank">
      github.com/iliomar/shell-tutorial-assignment
    </a>.
    You are encouraged to clone the repository, follow the setup instructions, and run the assignments locally to strengthen your command-line skills.
  </p>

  <p>
    If you're new to the shell or need a refresher, make sure to check the <code>setup.sh</code> file for environment setup, and review the included documentation to guide you through the workflow.
  </p>

  <img src="bash_tricks.png" alt="Some Bash Tricks!" style="max-width: 100%; height: auto; border-radius: 10px;" />
</section>


 <section id="setup" style="margin-bottom: 3em;">
  <h2>Setup Instructions</h2>

  <p>Before you begin solving the assignments, make sure your environment is ready. Follow these steps to set everything up:</p>

  <ol>
    <li>
      <strong>Clone the repository:</strong>
      <pre><code class="bash">git clone https://github.com/iliomar/shell-tutorial-assignment.git
cd shell-tutorial-assignment</code></pre>
    </li>

    <li>
      <strong>Run the setup script <em>(optional)</em>:</strong><br>
      This script ensures that all necessary directories and sample files are in place.
      <pre><code class="bash">chmod +x setup.sh
./setup.sh</code></pre>

      <p><strong> Note:</strong> If everything is already present (e.g., you see the <code>data/</code>, <code>problems/</code>, and <code>solutions/</code> folders), you don't need to run <code>setup.sh</code> right away. However, it's helpful to use if:</p>
      <ul>
        <li>You accidentally delete or modify files and want to reset the environment.</li>
        <li>You clone the repo onto a fresh system.</li>
        <li>You want to understand or regenerate the structure and mock data programmatically.</li>
      </ul>
    </li>

    <li>
      <strong>Explore the repository structure:</strong><br>
      Here's a quick overview:
      <pre><code class="plaintext">shell-tutorial-assignments/
├── Problems/          # Assignment problem statements
    ├── Problem1
        ├── data/              # Sample data files (e.g., cosmic rays) 
            ├── cosmic_flux_data.txt     # data file
        ├── cosmic_rays.md     # Problem statement
    ├── Problem2
        ├── processing_cosmic_rays.md     # Problem statement
        ├── data/              # Sample data files
            ├── cosmic_flux_data.txt     # data file 
        ├── results/              # Sample data files
            ├── cosmic_flux_backup.txt     # data file 
    ├── Problem3
        ├── sim_log.md     # Problem statement
        ├── simulation_logs/              # log files
├── solutions/         # Your Bash solutions
├── setup.sh           # Environment setup script if needed</code></pre>
    </li>

    <li>
      <strong>Start solving the problems:</strong><br>
      Read each problem in the <code>problems/</code> folder. You can find the solution scripts inside <code>solutions/</code>.
    </li>

    <li>
      <strong>How to run the solutions</strong><br>
      This script ensures that you have permission to execute the solutions.
      <pre><code class="bash">chmod +x Solution*.sh
./Solution*.sh</code></pre>
      Make sure to run the solution as follow <code>./Solution1.sh</code> <code>./Solution2.sh</code><code>./Solution3.sh</code>. Remeber to execute it from the <code>solutions/</code> folder.

    </li>
  </ol>

  <p>
     <strong>System Notes:</strong><br>
    ✔️ <strong>AlmaLinux OS 9:</strong> This system already includes Bash and the required core utilities by default—no setup needed.<br>
    ✔️ <strong>macOS:</strong> You can use the default Terminal with Bash. All commands used in these assignments are compatible with macOS.
  </p>

  <p>
     <strong>Tip:</strong> Use a terminal with Bash support (like Linux, macOS Terminal, or Git Bash on Windows). Get comfortable with commands like <code>cd</code>, <code>ls</code>, <code>grep</code>, <code>cut</code>, <code>awk</code>, <code>sort</code>, and <code>head</code>.
  </p>

  <p>You're all set</p>
</section>



    <section id="assignments">
      <h2>Problems</h2>
      <p>Problems are located in the <code>problems/</code> folder. Each problem is designed to challenge a specific Bash concept, such as loops, conditionals, or text processing tools.</p>
      
      <p>Clone the repository and try to solve each problem using Bash commands and scripts.</p>
    </section>

   <section id="assignment1" style="margin-bottom: 4em;">
  <h2> Problem 1: Exploring Cosmic Ray Flux Data</h2>
  <p>Welcome to your first assignment! We'll apply the basic shell skills you've learned to explore a dataset inspired by astrophysical particle physics. The data contains simulated measurements of cosmic ray particle fluxes detected by an instrument in space.</p>

  <h3>Topics Covered</h3>
  <ul>
    <li>Navigating Files and Directories</li>
    <li>Working with Files and Directories</li>
  </ul>

  <h3>Dataset</h3>
  <p>The file is located at: <code>data/cosmic_flux_data.txt</code></p>
  <pre><code>Energy(GeV)	Flux(particles/m²/s/sr/GeV)	Particle
12.5	4.2e-3	Proton
55.3	1.1e-3	Electron
29.9	3.7e-3	Proton
9.8	5.5e-3	Muon
...</code></pre>

  <p><strong>Each row</strong> corresponds to a cosmic ray detection event. Your job is to navigate the file system and extract meaningful scientific information using shell commands.</p>

  <h3>Problem Statement</h3>
  <ol>
    <li><strong>Navigate</strong> to the <code>data/</code> directory using <code>cd</code>.</li>
    <li>Use <code>ls</code> to verify that the file <code>cosmic_flux_data.txt</code> exists.</li>
    <li>Use <code>cat</code> or <code>less</code> to inspect the file content. How many columns are there? What are their headers?</li>
    <li>Return to the parent directory and create a new folder called <code>results/</code>.</li>
    <li>Copy the dataset into the <code>results/</code> folder using <code>cp</code>.</li>
    <li>Move into the <code>results/</code> folder and rename the file to <code>cosmic_flux_backup.txt</code>.</li>
    <li>Count how many lines (including the header) are in the file using <code>wc</code>.</li>
    <li>Now return to the repo root using <code>cd ../..</code> and continue with the next problem once finished.</li>
  </ol>

  <h3>Notes</h3>
  <ul>
    <li>Use <code>pwd</code> to check where you are at any moment.</li>
    <li>Use <code>mkdir</code>, <code>cp</code>, and <code>mv</code> with care — these commands change your file system!</li>
    <li>Remember: you can always use <code>man &lt;command&gt;</code> to learn more.</li>
  </ul>

  
  <p>Create a Bash script called <code>assignment1_solution.sh</code> that performs all the steps above, using relative paths.</p>
</section>

<section id="assignment2" style="margin-bottom: 4em;">
  <h2>Problem 2: Processing Cosmic Ray Data with Pipes, Filters, and Loops</h2>
  <p>Building on your first assignment, now you will analyze the cosmic ray flux data more deeply using pipes, filters, and loops in Bash.</p>

  <h3>Topics Covered</h3>
  <ul>
    <li>Pipes and Filters (<code>|</code>, <code>grep</code>, <code>awk</code>, <code>cut</code>, <code>sort</code>, <code>uniq</code>)</li>
    <li>Loops (<code>for</code>, <code>while</code>)</li>
    <li>Basic File Navigation and Manipulation</li>
  </ul>

  <img src="pipes.png" alt="pipes" style="max-width: 100%; height: auto; border-radius: 10px;" />

  <img src="grep.png" alt="grep" style="max-width: 100%; height: auto; border-radius: 10px;" />

  <img src="sort_uniq.png" alt="sort & uniq" style="max-width: 100%; height: auto; border-radius: 10px;" />

  <h3>Dataset</h3>
  <p>Recall the file <code>results/cosmic_flux_backup.txt</code> from Assignment 1. This file contains the cosmic ray flux measurements.</p>

  <h3>Problem Statement</h3>
  <ol>
    <li>Navigate to the <code>results/</code> directory.</li>
    <li>Using pipes and filters, find out how many unique particle types are present in the dataset.</li>
    <li>Extract and display the top 5 events with the highest energy values.</li>
    <li>Use a <code>for</code> or <code>while</code> loop to calculate and print the average flux for each particle type found in the dataset.</li>
    <li>Create a new file called <code>high_energy_protons.txt</code> that contains only rows for protons with energy greater than 20 GeV.</li>
  </ol>

  <h3>Notes</h3>
  <ul>
    <li>Remember the dataset has a header row — skip it when processing numeric data.</li>
    <li>Use commands like <code>grep</code>, <code>awk</code>, <code>sort</code>, <code>uniq</code>, <code>cut</code>, and <code>head</code>.</li>
    <li>Loops are useful to automate repeated tasks for each particle type.</li>
    <li>Print meaningful messages for clarity when running your script.</li>
  </ul>

  
  <p>Create a Bash script called <code>assignment2_solution.sh</code> that performs all the steps and saves the output files inside the <code>results/</code> directory.</p>
</section>


<section id="assignment3" style="margin-bottom: 4em;">
  <h2>Problem 3: Analyze Simulation Logs with Shell Scripts</h2>
  <p>You have a folder <code>simulation_logs/</code> containing many <code>.log</code> files from astrophysics simulations. Each file may have lines with <code>ERROR</code> or <code>WARNING</code>.</p>

  <h3>Tasks</h3>
  <ol>
    <li>Use <code>find</code> to locate all <code>.log</code> files inside <code>simulation_logs/</code>.</li>
    <li>Count and print the total number of log files found.</li>
    <li>For each file that contains <code>ERROR</code>, print the filename and the number of error lines.</li>
    <li>Count how many files contain <code>ERROR</code> and how many contain <code>WARNING</code>.</li>
    <li>Extract all <code>ERROR</code> lines from all files into <code>all_errors.txt</code>.</li>
    <li><em>(Optional)</em> Print the top 5 most common error messages from <code>all_errors.txt</code>.</li>
  </ol>

  <img src="find.png" alt="Banner showing cosmic rays" style="max-width: 100%; height: auto; border-radius: 10px;" />

  <h3>Notes</h3>
  <ul>
    <li>Write a shell script <code>analyze_logs.sh</code> to do the above.</li>
    <li>Include clear messages describing each step.</li>
    <li>Use loops, <code>grep</code>, <code>find</code>, <code>wc</code>, <code>sort</code>, and <code>uniq</code>.</li>
  </ul>

  
  <p>Submit the executable shell script <code>analyze_logs.sh</code> that performs all tasks.</p>
</section>




<section id="solution1" style="margin-bottom: 4em;">
  <h2>Solution to Problem 1: Exploring Cosmic Ray Flux Data</h2>
  <p>Below is a step-by-step Bash script explanation that performs the tasks requested.</p>

  <pre><code class="bash">
#!/bin/bash

#Navigate to the data directory
echo "Navigating to data/ directory..."
cd data || { echo "data/ directory not found!"; exit 1; }

#List files to confirm dataset exists
echo "Listing files in data/:"
ls

#Inspect the file content (show first 5 lines)
echo "Displaying first 5 lines of cosmic_flux_data.txt:"
head -n 5 cosmic_flux_data.txt

#Go back to the Problem1/ folder
echo "Returning to Problem1/..."
cd ..

#Create results/ directory if it does not exist
echo "Creating results/ directory..."
mkdir -p results

#Copy dataset to results/
echo "Copying dataset to results/ folder..."
cp data/cosmic_flux_data.txt results/

#Move into results/ and rename the file
cd results || { echo "results/ directory not found!"; exit 1; }
echo "Renaming cosmic_flux_data.txt to cosmic_flux_backup.txt..."
mv cosmic_flux_data.txt cosmic_flux_backup.txt

#Count the lines including header
echo "Counting lines in cosmic_flux_backup.txt:"
wc -l cosmic_flux_backup.txt

#Return to repo root (assuming started from repo root)
echo "Returning to repo root directory..."
cd ../..

echo "Assignment 1 tasks complete."
  </code></pre>

  <h3>Explanation:</h3>
  <ul>
    <li><code>cd data</code>: changes directory to <code>data/</code> folder containing the dataset.</li>
    <li><code>ls</code>: lists files to confirm the dataset file is present.</li>
    <li><code>head -n 5</code>: shows the first 5 lines so we can inspect headers and sample data.</li>
    <li><code>mkdir -p results</code>: creates a new folder <code>results/</code>, <code>-p</code> avoids errors if it exists.</li>
    <li><code>cp</code>: copies the file to the new directory.</li>
    <li><code>mv</code>: renames the copied file inside <code>results/</code>.</li>
    <li><code>wc -l</code>: counts lines to verify file content length.</li>
    <li><code>cd ../..</code>: moves back to the repository root.</li>
  </ul>

  <p>This script uses relative paths to ensure portability and is designed for easy understanding and modification.</p>
</section>

<section id="solution2" style="margin-bottom: 4em;">
  <h2>Solution to Problem 2: Processing Cosmic Ray Data with Pipes, Filters, and Loops</h2>
  <p>This script performs all the tasks requested using pipes, filters, loops, and basic shell scripting.</p>

  <pre><code class="bash">
#!/bin/bash

# Navigate to results directory
echo "Navigate to results/ directory..."
cd results || { echo "results/ directory not found!"; exit 1; }

# Find number of unique particle types
echo "Counting unique particle types..."
unique_particles=$(tail -n +2 cosmic_flux_backup.txt | cut -f3 | sort | uniq | wc -l)
echo "There are $unique_particles unique particle types."

# Extract top 5 highest-energy events
echo "Top 5 highest-energy events:"
echo "(Energy(GeV), Flux, Particle)"
tail -n +2 cosmic_flux_backup.txt | sort -k1,1nr | head -n 5

# Calculate average flux for each particle type using a loop
echo "Calculating average flux per particle type..."
particles=$(tail -n +2 cosmic_flux_backup.txt | cut -f3 | sort | uniq)

for particle in $particles; do
  avg_flux=$(awk -v p="$particle" 'BEGIN{sum=0;count=0} $3==p {sum+=$2; count++} END{if(count>0) print sum/count; else print 0}' cosmic_flux_backup.txt)
  echo "Average flux for $particle: $avg_flux"
done

# Create file with high-energy protons (>20 GeV)
echo "Creating high_energy_protons.txt for protons with Energy > 20 GeV..."
# Copy header first
head -n 1 cosmic_flux_backup.txt > high_energy_protons.txt
# Filter and append matching lines
awk 'NR>1 && $3=="Proton" && $1>20 {print}' cosmic_flux_backup.txt >> high_energy_protons.txt

echo "All tasks complete. File high_energy_protons.txt created in results/."

# Return to repo root
cd ../..
  </code></pre>

  <h3>Explanation:</h3>
  <ul>
    <li><code>tail -n +2</code>: skips header row for accurate data processing.</li>
    <li><code>cut -f3</code>: extracts the third column (Particle type).</li>
    <li><code>sort | uniq | wc -l</code>: counts unique particle types.</li>
    <li><code>sort -k1,1nr</code>: sorts descending by the first column (Energy).</li>
    <li><code>head -n 5</code>: picks the top 5 after sorting.</li>
    <li>The <code>for</code> loop iterates over each particle type to calculate average flux using <code>awk</code>.</li>
    <li><code>awk</code> filters protons with energy greater than 20 GeV to create a new file with header preserved.</li>
  </ul>

  <p>This script uses relative paths and includes safety checks to ensure directories exist.</p>
</section>

<section id="solution3" style="margin-bottom: 4em;">
  <h2>Solution for Problem 3: Analyze Astrophysics Simulation Logs</h2>

  <p>Below is a well-commented shell script <code>analyze_logs.sh</code> that accomplishes all tasks from the assignment:</p>

  <pre><code class="bash">#!/bin/bash

echo "Starting log analysis..."

# Find all .log files
log_files=$(find simulation_logs/ -type f -name "*.log")

if [[ -z "$log_files" ]]; then
  echo "No log files found in simulation_logs/."
  exit 1
fi

# Count total log files found
num_files=$(echo "$log_files" | wc -l)
echo "Total log files found: $num_files"

error_files=0
warning_files=0

# Loop over files to find errors and warnings
for file in $log_files; do
  error_count=$(grep -c "ERROR" "$file")
  warning_count=$(grep -c "WARNING" "$file")

  if [[ $error_count -gt 0 ]]; then
    echo "File '$file' contains $error_count ERROR lines."
    ((error_files++))
  fi
  if [[ $warning_count -gt 0 ]]; then
    ((warning_files++))
  fi
done

echo "Number of files with ERROR: $error_files"
echo "Number of files with WARNING: $warning_files"

# Extract all ERROR lines into all_errors.txt
echo "Extracting all ERROR lines into all_errors.txt..."
> all_errors.txt  # Empty the file first

for file in $log_files; do
  grep "ERROR" "$file" >> all_errors.txt
done

# (Optional): Show top 5 most common error messages
if [[ -s all_errors.txt ]]; then
  echo "Top 5 most common error messages:"
  cut -d':' -f2- all_errors.txt | sort | uniq -c | sort -nr | head -n 5
else
  echo "No ERROR lines found, skipping top error messages."
fi

echo "Log analysis completed."
</code></pre>

  <h3>How to use:</h3>
  <ul>
    <li>Save this script as <code>analyze_logs.sh</code> inside your repository.</li>
    <li>Make it executable with <code>chmod +x analyze_logs.sh</code>.</li>
    <li>Run it from the command line with <code>./analyze_logs.sh</code>.</li>
    <li>Make sure the <code>simulation_logs/</code> directory is at the same level or adjust the script paths.</li>
  </ul>

  <p>This script provides informative messages, counts files, extracts errors, and summarizes warnings as requested.</p>
</section>


    <section id="resources">
      <h2>Additional Resources</h2>
      <ul>
        <li><a href="https://swcarpentry.github.io/shell-novice/" target="_blank" rel="noopener">Software Carpentry Shell Novice Tutorial</a></li>
        <li><a href="https://github.com/iliomar/shell-tutorial-assignments" target="_blank" rel="noopener">GitHub Repository</a></li>
        <li><a href="https://www.gnu.org/software/bash/manual/bash.html" target="_blank" rel="noopener">Bash Reference Manual</a></li>
        <li><a href="https://appletree.or.kr/quick_reference_cards/Unix-Linux/Linux%20Command%20Line%20Cheat%20Sheet.pdf" target="_blank" rel="noopener">Cheat Sheet</a></li>
      </ul>
    </section>

    <section id="contact">
      <h2>Contact</h2>
      <p>If you have any questions or want to contribute, please reach out to Iliomar Rodriguez Ramos.</p>
      <p>Email: <a href="mailto:iliomar.rodriguez@upr.edu">iliomar.rodriguez@upr.edu</a></p>
    </section>
  </main>
</div>

<script>
  // Highlight the active menu item based on scroll position
  const sections = document.querySelectorAll('main section');
  const navLinks = document.querySelectorAll('nav ul li a');

  window.addEventListener('scroll', () => {
    let current = '';
    sections.forEach(section => {
      const sectionTop = section.offsetTop - 100;
      if (pageYOffset >= sectionTop) {
        current = section.getAttribute('id');
      }
    });
    navLinks.forEach(link => {
      link.classList.remove('active');
      if (link.getAttribute('href') === '#' + current) {
        link.classList.add('active');
      }
    });
  });
</script>

</body>
</html>
